<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="09-dom-project-rock-paper-scissors-new.css">
</head>
<body>
    <p class="myp1">Rock Paper Scissors</p>
    <button class="js-rockButton rock-btn"  onclick="
        playGame('Rock');
    "
    ></button>

    <button class="js-paperButton paper-btn" onclick="
        playGame('Paper');
    "></button>

    <button class="js-scissorsButton scissor-btn" onclick="
        playGame('Scissors');
    "></button>

    <p class="js-resultPara"></p>
    <p class="js-decisionPara"></p>
    <p class="deciderPara"></p>

    <button class="js-resetButton reset-btn" onclick="
        resetScore();
    ">Reset Score</button>
    <!-- <p><a href="./05-cart-quantity.html">Click here</a> to see the final version of the project</p> -->
    <script>
        let score= JSON.parse(localStorage.getItem('score'));
        if (score === null) {
        score = {
            Wins: 0,
            Losses: 0,
            Ties: 0
            };
        }

        function resetScore(){
            score.Wins=0;
            score.Losses=0;
            score.Ties=0;
            document.querySelector(`.deciderPara`).innerHTML=`Wins: ${score.Wins}, Losses: ${score.Losses}, Ties: ${score.Ties}`;
        }
        
        function pickComputerMove(){
            const randomNumber=Math.random();
            let computerMove='';
            if(randomNumber>=0 && randomNumber<(1/3)){
                computerMove='Rock';
            }
            else if(randomNumber>=(1/3) && randomNumber<(2/3)){
                computerMove='Paper';
            }
            else{
                computerMove='Scissors';
            }
            return computerMove;
        }
        
        
        function playGame(playerMove){
            const computerMove=pickComputerMove();
            let result='';
            if(playerMove==='Scissors'){
                if(computerMove==='Rock'){
                    result='You Lose';
                }
                else if(computerMove==='Paper') result='You Win';
                else result='Tie';
                // alert(`You picked Scissors. Computer picked ${computerMove}. ${result}`);
                
            }

            else if(playerMove==='Rock'){
                // const computerMove=pickComputerMove();
                if(computerMove==='Rock'){
                    result='Tie'
                }
                else if(computerMove==='Paper') result='You Lose'
                else result='You Win';
                let buttonElement = document.querySelector('.js-rockButton');
                // alert(`You picked Rock. Computer picked ${computerMove}. ${result}`);
            }

            else{
                // const computerMove=pickComputerMove();
                if(computerMove==='Rock'){
                    result='You Win'
                }
                else if(computerMove==='Paper') result='Tie'
                else result='You Lose';
                let buttonElement = document.querySelector('.js-paperButton');
            }

            if(result==='You Win') score.Wins++;
            else if(result==='You Lose') score.Losses++;
            else score.Ties++;

            localStorage.setItem('score',JSON.stringify(score));
            
            // alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result} \n Wins: ${score.Wins}, Losses: ${score.Losses}, Ties: ${score.Ties}`);
            document.querySelector(`.js-resultPara`).innerHTML = `${result}`;
            document.querySelector(`.js-decisionPara`).innerHTML = `You chose ${playerMove}, however computer chose ${computerMove}`;
            document.querySelector(`.deciderPara`).innerHTML=`Wins: ${score.Wins}, Losses: ${score.Losses}, Ties: ${score.Ties}`;
        }
    </script>
</body>
</html>